<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stroke Prediction</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #7FDBDB; /* Turquoise background color */
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header styles */
        header {
            padding: 20px 0;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
        }
        
        .logo {
            width: 50px;
            height: 50px;
            background-color: #FFEB3B; /* Yellow */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 10px;
            position: relative;
        }
        
        .logo .heart {
            color: #E53935; /* Red heart */
            font-size: 24px;
        }
        
        .logo .plus {
            position: absolute;
            top: 5px;
            right: 0;
            background: white;
            color: #4CAF50; /* Green plus */
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 500;
            color: #333;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li a {
            padding: 10px 20px;
            color: #333;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links li a:hover {
            color: #E53935;
        }
        
        /* Hero section styles */
        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 60px 0;
        }
        
        .hero-text {
            flex: 1;
            padding-right: 40px;
        }
        
        .hero-text h1 {
            font-size: 48px;
            line-height: 1.2;
            margin-bottom: 20px;
            color: #212121;
        }
        
        .hero-text p {
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        .hero-img {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .hero-img img {
            max-width: 100%;
            height: auto;
        }
        
        .btn {
            display: inline-block;
            background-color: #E53935;
            color: white;
            padding: 12px 30px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #C62828;
        }
        
        /* Form section styles */
        .predict-section {
            display: none;
            padding: 40px 0;
        }
        
        .form-container {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .form-header h2 {
            font-size: 28px;
            color: #333;
        }
        
        .form-illustration {
            position: absolute;
            left: 0;
            bottom: 0;
            width: 400px;
            height: auto;
        }
        
        .prediction-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-left: 380px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input {
            margin-right: 8px;
        }
        
        .form-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        .btn-reset {
            background-color: #90CAF9;
        }
        
        .btn-reset:hover {
            background-color: #64B5F6;
        }
        
        .btn-predict {
            background-color: #4CAF50;
        }
        
        .btn-predict:hover {
            background-color: #388E3C;
        }
        
        /* BMI Calculator Styles */
        .bmi-section {
            display: none;
            padding: 40px 0;
        }
        
        .bmi-container {
            background-color: #BFF6F8;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .bmi-header {
            background-color: #A83232;
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 5px 5px 0 0;
            margin: -40px -40px 30px -40px;
        }
        
        .bmi-header h2 {
            margin: 0;
            font-size: 28px;
        }
        
        .bmi-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .bmi-doctors {
            flex: 1;
            padding-right: 40px;
        }
        
        .bmi-doctors img {
            max-width: 100%;
            height: auto;
        }
        
        .bmi-calculator {
            flex: 1;
            padding: 20px;
        }
        
        .bmi-result {
            background-color: #333;
            color: white;
            border-radius: 5px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .bmi-value {
            font-size: 48px;
            font-weight: bold;
            color: #ADFF2F;
            margin-bottom: 10px;
        }
        
        .bmi-category {
            font-size: 20px;
        }
        
        .bmi-slider {
            margin-bottom: 30px;
        }
        
        .bmi-slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .bmi-slider-title {
            font-weight: 500;
        }
        
        .bmi-slider-value {
            font-weight: bold;
        }
        
        .range-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #A83232;
            cursor: pointer;
        }
        
        .range-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #A83232;
            cursor: pointer;
        }
        
        /* Glucose Calculator Styles */
        .glucose-section {
            display: none;
            padding: 40px 0;
        }
        
        .glucose-container {
            background-color: #BFF6F8;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .glucose-header {
            background-color: #2196F3;
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 5px 5px 0 0;
            margin: -40px -40px 30px -40px;
        }
        
        .glucose-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .glucose-calculator {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .glucose-input-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .glucose-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            margin-right: 10px;
        }
        
        .glucose-unit {
            font-weight: bold;
            width: 80px;
        }
        
        .glucose-result {
            background-color: #333;
            color: white;
            border-radius: 5px;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
        }
        
        .glucose-value {
            font-size: 36px;
            font-weight: bold;
            color: #ADFF2F;
            margin-bottom: 10px;
        }
        
        /* Result section styles */
        .results-section {
            display: none;
            padding: 40px 0;
        }
        
        .results-container {
            background-color: white;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .results-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        .results-icon.high-risk {
            color: #E53935;
        }
        
        .results-icon.low-risk {
            color: #4CAF50;
        }
        
        .results-title {
            font-size: 28px;
            margin-bottom: 20px;
        }
        
        .results-description {
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        .results-probability {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
        }
        
        .risk-factors {
            background-color: #f5f5f5;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }
        
        .risk-factors h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .risk-factors ul {
            padding-left: 20px;
        }
        
        .risk-factors li {
            margin-bottom: 10px;
        }
        
        /* Brain Scan Section Styles */
        .brain-scan-section {
            display: none;
            padding: 40px 0;
        }
        
        .brain-scan-container {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .brain-scan-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .brain-scan-header h2 {
            font-size: 28px;
            color: #333;
        }
        
        .brain-scan-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .upload-container {
            width: 100%;
            max-width: 800px;
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s;
        }
        
        .upload-container:hover {
            border-color: #4CAF50;
        }
        
        .upload-icon {
            font-size: 60px;
            color: #4CAF50;
            margin-bottom: 20px;
        }
        
        .upload-text {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .image-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
            justify-content: center;
        }
        
        .image-preview {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 1px solid #ddd;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
            color: #E53935;
        }
        
        .analysis-results {
            margin-top: 40px;
            width: 100%;
            max-width: 800px;
        }
        
        .analysis-result-item {
            background-color: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
        }
        
        .result-image {
            width: 300px;
            border-radius: 5px;
            margin-right: 20px;
        }
        
        .result-info {
            flex: 1;
        }
        
        .result-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .result-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .status-positive {
            background-color: #FFEBEE;
            color: #E53935;
        }
        
        .status-negative {
            background-color: #E8F5E9;
            color: #4CAF50;
        }
        
        .affected-areas {
            margin-top: 15px;
        }
        
        .affected-areas h4 {
            margin-bottom: 10px;
        }
        
        .affected-areas ul {
            padding-left: 20px;
        }
        
        /* Footer styles */
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .social-icons a {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 50%;
            margin: 0 10px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-icons a:hover {
            background-color: #E53935;
            color: white;
        }
        
        .copyright {
            font-size: 14px;
            color: #333;
        }
        
        /* Popup styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        
        .popup-container {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .popup-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #333;
        }
        
        .popup-header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .popup-title {
            font-size: 24px;
            color: #333;
        }
        
        .popup-content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        .popup-footer {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }
        
        /* Scan result popup styles */
        .scan-result-popup {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 900px;
            padding: 0;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .scan-result-popup .popup-header {
            background-color: #f5f5f5;
            padding: 20px 30px;
            margin: 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .scan-result-popup .popup-close {
            top: 20px;
            right: 20px;
        }
        
        .scan-result-popup .popup-content {
            padding: 0 30px 30px 30px;
        }
        
        .scan-result-popup .popup-image {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .scan-result-popup .popup-image img {
            max-width: 100%;
            max-height: 400px;
            border-radius: 5px;
        }
        
        .scan-result-popup .result-heading {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #555;
        }
        
        .scan-result-popup .result-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #E53935;
        }
        
        .scan-result-popup .result-value.negative {
            color: #4CAF50;
        }
        
        .scan-result-popup .result-section {
            margin-bottom: 30px;
        }
        
        .scan-result-popup .affected-areas-list {
            list-style-type: disc;
            padding-left: 20px;
        }
        
        .scan-result-popup .affected-areas-list li {
            margin-bottom: 8px;
        }
        
        .scan-result-popup .disclaimer {
            font-style: italic;
            color: #777;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        /* Make sections visible based on active page */
        .active-section {
            display: block;
        }
        
        /* Active nav link */
        .nav-active {
            color: #E53935 !important;
            border-bottom: 2px solid #E53935;
        }
        
        /* Counsel section styles */
        .counsel-section {
            display: none;
            padding: 40px 0;
        }
        
        /* Contact section styles */
        .contact-section {
            display: none;
            padding: 40px 0;
        }
        
        .contact-container {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .contact-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .team-members {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .team-member {
            background-color: #f5f5f5;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            flex: 1;
            min-width: 300px;
            transition: transform 0.3s;
        }
        
        .team-member:hover {
            transform: translateY(-5px);
        }
        
        .team-member.red {
            background-color: #FFCDD2;
        }
        
        .team-member.blue {
            background-color: #BBDEFB;
        }
        
        .team-member.yellow {
            background-color: #FFF9C4;
        }
        
        .member-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 15px;
            border: 3px solid white;
        }
        
        .member-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .member-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .member-role {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .member-social {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .member-social a {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 30px;
            height: 30px;
            background-color: white;
            border-radius: 50%;
            margin: 0 5px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .member-social a:hover {
            background-color: #E53935;
            color: white;
        }
        
        .contact-btn {
            display: block;
            background-color: white;
            color: #333;
            padding: 10px;
            border-radius: 5px;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .contact-btn:hover {
            background-color: #E53935;
            color: white;
        }
        
        /* Responsive styles */
        @media (max-width: 992px) {
            .hero {
                flex-direction: column;
                padding: 40px 0;
            }
            
            .hero-text {
                padding-right: 0;
                margin-bottom: 40px;
                text-align: center;
            }
            
            .prediction-form {
                margin-left: 0;
                grid-template-columns: 1fr;
            }
            
            .form-illustration {
                display: none;
            }
            
            .bmi-content {
                flex-direction: column;
            }
            
            .bmi-doctors {
                display: none;
            }
            
            .team-members {
                flex-direction: column;
            }
            
            .analysis-result-item {
                flex-direction: column;
            }
            
            .result-image {
                width: 100%;
                margin-right: 0;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo-container">
                    <div class="logo">
                        <i class="fas fa-heart heart"></i>
                        <div class="plus">+</div>
                    </div>
                    <span class="logo-text">Stroke prediction</span>
                </div>
                
                <ul class="nav-links">
                    <li><a href="#" class="nav-link nav-active" data-section="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-section="predict">Predict</a></li>
                    <li><a href="#" class="nav-link" data-section="brain-scan">Brain Scan</a></li>
                    <li><a href="#" class="nav-link" data-section="counsel">Counsel</a></li>
                    <li><a href="#" class="nav-link" data-section="contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Home Section -->
    <section class="hero-section active-section" id="home">
        <div class="container">
            <div class="hero">
                <div class="hero-text">
                    <h1>Know if you are prone to Stroke or not.</h1>
                    <p>Is your life stressful? Do you feel anxious for no reason? Take this quiz, figure out what is going on and take control of your life ❤️</p>
                    <a href="#" class="btn" id="get-started">Get started</a>
                </div>
                <div class="hero-img">
                    <img src="https://img.freepik.com/free-vector/doctors-examining-giant-heart-medical-check-up-treatment_335657-2780.jpg?w=740" alt="Heart Health Checkup">
                </div>
            </div>
        </div>
    </section>

    <!-- Predict Section (Stroke Prediction Form) -->
    <section class="predict-section" id="predict">
        <div class="container">
            <div class="form-container">
                <div class="form-header">
                    <h2>STROKE PREDICTION FORM</h2>
                </div>
                
                <img src="https://img.freepik.com/free-vector/doctor-character-background_1270-84.jpg?w=740" alt="Doctor" class="form-illustration">
                
                <form class="prediction-form" id="stroke-form" action="/predict" method="post">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" name="name" class="form-control" placeholder="Name">
                    </div>
                    
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" class="form-control" placeholder="Age" required min="0" max="120">
                    </div>
                    
                    <div class="form-group">
                        <label for="ever_married">Marital Status</label>
                        <select id="ever_married" name="ever_married" class="form-control" required>
                            <option value="">Select</option>
                            <option value="Yes">Married</option>
                            <option value="No">Never Married</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="work_type">Work type</label>
                        <select id="work_type" name="work_type" class="form-control" required>
                            <option value="">Select</option>
                            <option value="Private">Private</option>
                            <option value="Self-employed">Self-employed</option>
                            <option value="Govt_job">Government Job</option>
                            <option value="children">Children</option>
                            <option value="Never_worked">Never worked</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="grid-column: span 2;">
                        <label for="residence_type">Residence type</label>
                        <select id="residence_type" name="residence_type" class="form-control" required>
                            <option value="">Select</option>
                            <option value="Urban">Urban</option>
                            <option value="Rural">Rural</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="grid-column: span 2;">
                        <label>Gender:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="gender-female" name="gender" value="Female" required>
                                <label for="gender-female">Female</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="gender-male" name="gender" value="Male">
                                <label for="gender-male">Male</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="bmi">BMI</label>
                        <input type="number" id="bmi" name="bmi" class="form-control" placeholder="BMI" required min="10" max="50" step="0.1">
                        <div style="text-align: right; margin-top: 5px;">
                            <a href="#" id="calculate-bmi-link" style="font-size: 14px; color: #4CAF50;">Calculate BMI</a>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="avg_glucose_level">Glucose level</label>
                        <input type="number" id="avg_glucose_level" name="avg_glucose_level" class="form-control" placeholder="mg/dL" required min="50" max="300" step="0.1">
                        <div style="text-align: right; margin-top: 5px;">
                            <a href="#" id="calculate-glucose-link" style="font-size: 14px; color: #4CAF50;">Convert from mmol/L</a>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="smoking_status">Do you smoke?</label>
                        <select id="smoking_status" name="smoking_status" class="form-control" required>
                            <option value="">Select</option>
                            <option value="never smoked">Never smoked</option>
                            <option value="formerly smoked">Formerly smoked</option>
                            <option value="smokes">Currently smokes</option>
                            <option value="Unknown">Unknown</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="hypertension">Have you been diagnosed with hypertension?</label>
                        <select id="hypertension" name="hypertension" class="form-control" required>
                            <option value="">Select</option>
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="grid-column: span 2;">
                        <label for="heart_disease">Do you have any other heart diseases?</label>
                        <select id="heart_disease" name="heart_disease" class="form-control" required>
                            <option value="">Select</option>
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>
                    
                    <div class="form-buttons" style="grid-column: span 2;">
                        <button type="reset" class="btn btn-reset">Reset</button>
                        <button type="submit" class="btn btn-predict">Predict</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- BMI Calculator Section -->
    <section class="bmi-section" id="bmi-calculator">
        <div class="container">
            <div class="bmi-container">
                <div class="bmi-header">
                    <h2>BMI Calculator</h2>
                </div>
                
                <div class="bmi-content">
                    <div class="bmi-doctors">
                        <img src="https://img.freepik.com/free-vector/doctor-character-background_1270-83.jpg?w=740" alt="Doctors">
                    </div>
                    
                    <div class="bmi-calculator">
                        <div class="bmi-result">
                            <div class="bmi-value" id="bmi-value">20.0</div>
                            <div class="bmi-category" id="bmi-category">Normal weight</div>
                        </div>
                        
                        <div class="bmi-slider">
                            <div class="bmi-slider-header">
                                <span class="bmi-slider-title">Weight</span>
                                <span class="bmi-slider-value" id="weight-value">20 kg</span>
                            </div>
                            <input type="range" min="10" max="150" value="20" class="range-slider" id="weight-slider">
                        </div>
                        
                        <div class="bmi-slider">
                            <div class="bmi-slider-header">
                                <span class="bmi-slider-title">Height</span>
                                <span class="bmi-slider-value" id="height-value">100 cm</span>
                            </div>
                            <input type="range" min="50" max="220" value="100" class="range-slider" id="height-slider">
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button id="use-bmi-value" class="btn">Use This BMI Value</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Glucose Calculator Section -->
    <section class="glucose-section" id="glucose-calculator">
        <div class="container">
            <div class="glucose-container">
                <div class="glucose-header">
                    <h2>Blood Glucose Converter</h2>
                </div>
                
                <div class="glucose-content">
                    <div class="glucose-calculator">
                        <div class="form-group">
                            <label for="mmol-value">Enter your blood glucose level in mmol/L:</label>
                            <div class="glucose-input-group">
                                <input type="number" id="mmol-value" class="glucose-input" placeholder="Enter value" min="0" max="30" step="0.1">
                                <span class="glucose-unit">mmol/L</span>
                            </div>
                        </div>
                        
                        <div class="glucose-result">
                            <div id="mgdl-value" class="glucose-value">0</div>
                            <div>mg/dL</div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button id="convert-glucose" class="btn">Convert</button>
                            <button id="use-glucose-value" class="btn" style="margin-left: 10px;">Use This Value</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="results">
        <div class="container">
            <div class="results-container">
                <div class="results-icon high-risk" id="result-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                
                <h2 class="results-title" id="result-title">High Risk of Stroke</h2>
                
                <p class="results-description" id="result-description">
                    Based on your information, our model predicts that you may have a higher risk of stroke.
                </p>
                
                <div class="results-probability" id="result-probability">Probability: 75%</div>
                
                <div class="risk-factors">
                    <h3>Key Risk Factors:</h3>
                    <ul id="risk-factors-list">
                        <li>Age (65+): Stroke risk increases with age</li>
                        <li>High Blood Pressure: Major risk factor for stroke</li>
                        <li>High Blood Glucose: Indicates possible diabetes</li>
                    </ul>
                </div>
                
                <div style="display: flex; justify-content: center; gap: 20px;">
                    <a href="#" class="btn" id="back-to-form">Back to Form</a>
                    <a href="#" class="btn" id="go-to-scan">Analyze Brain Scan</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Brain Scan Section -->
    <section class="brain-scan-section" id="brain-scan">
        <div class="container">
            <div class="brain-scan-container">
                <div class="brain-scan-header">
                    <h2>Brain Scan Analysis</h2>
                    <p>Upload your brain CT scans for stroke detection</p>
                </div>
                
                <div class="brain-scan-content">
                    <div class="upload-container" id="upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text">
                            Drag & Drop brain scan images here or click to browse
                        </div>
                        <input type="file" id="file-input" style="display: none;" accept="image/*" multiple>
                        <button class="btn" id="browse-files">Browse Files</button>
                    </div>
                    
                    <div class="image-preview-container" id="image-preview-container">
                        <!-- Image previews will be added here -->
                    </div>
                    
                    <div class="analysis-results" id="analysis-results">
                        <!-- Analysis results will be added here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Counsel Section -->
    <section class="counsel-section" id="counsel">
        <div class="container">
            <div class="form-container">
                <div class="form-header">
                    <h2>Psychological Care After Stroke: The Virtuous Cycle of a Holistic Approach to Recovery</h2>
                </div>
                
                <div style="padding: 20px;">
                    <p>When stroke patients do not receive adequate support for mental health, it can hinder recovery and reduce motivation to pursue rehabilitation.</p>
                    <p>By treating stroke patients holistically – by taking into account mental and social factors, rather than just the physical symptoms of stroke – a better outcome can be achieved.</p>
                    <p>You're about to learn why psychological care is important for stroke patients and how you can approach it.</p>
                    
                    <h3>The Need for Psychological Care After Stroke</h3>
                    <p>A stroke is a life-threatening condition that often leaves significant aftermath, including but not limited to: impaired mobility, impaired speech and/or cognition, difficulty eating, and inability to use the bathroom independently.</p>
                    <p>The list of stroke secondary effects far exceeds that example, but hopefully this illustrates the devastating impact that stroke can have on one's life and independence.</p>
                    <p>Aside from physical impairments, between 35%-60% of stroke patients experience cognitive impairments as well.</p>
                    <p>On top of that, more than a third of stroke survivors struggle with post-stroke depression, the most common psychiatric disorder after stroke.</p>
                    <p>With the majority of stroke patients struggling with new cognitive, physical, and emotional distress, psychological care should be prioritized.</p>
                    
                    <h3>The Virtuous Cycle of Psychological Care</h3>
                    <p>"Being able to talk to someone in the early days who really knows what you're going through helps to stop you having to go to a psychiatrist six months later." – A stroke patient with aphasia.</p>
                    <p>When stroke patients can receive psychological care during the early stages of recovery, it can help improve levels of confidence, motivation, and wellbeing.</p>
                    <p>Then, the benefits of psychological care create a virtuous cycle for the stroke patient. Unlike a vicious cycle, where negative events reinforce themselves, a virtuous cycle occurs when positive events reinforce themselves.</p>
                    <p>Here's what the virtuous cycle of psychological care after stroke could look like:</p>
                    <ul>
                        <li>More psychological care results in more positive mood and confidence</li>
                        <li>Positive mood and confidence motivates more action towards recovery, which results in more physical improvements</li>
                        <li>Physical improvements boost confidence and positive mood even more</li>
                    </ul>
                    <p>As you can see, there is much to gain from psychological care after stroke. If you're interested in a holistic approach to recovery, here are the types of psychological care you can consider:</p>
                    
                    <h3>Seeking Psychological Care After Stroke</h3>
                    <p>If you would like to seek psychological care for yourself or a loved one, talk to your doctor or medical team. Your doctor may refer you to a psychiatrist or other health specialist.</p>
                    <p>Here are some methods for psychological care after stroke:</p>
                    <ul>
                        <li><strong>Psychotherapy:</strong><br>
                            This is often referred to as "talk therapy" where you sit down and speak to a trained therapist, which can help with a variety of psychiatric disorders including post-stroke depression. If therapy is started early, it may even help prevent post-stroke depression altogether.</li>
                        <li><strong>Positive psychology:</strong><br>
                            While traditional psychology focuses on mental illness, positive psychology focuses on mental wellness. It focuses on creating states of happiness, meaning, and fulfillment by using exercises that help retrain the brain. The book Healing & Happiness After Stroke touches on positive psychology for stroke survivors.</li>
                        <li><strong>Mindfulness:</strong><br>
                            This includes the practice of living in the present moment rather than worrying about the past or future. There are apps that help with mindfulness, such as Headspace.</li>
                        <li><strong>Cognitive behavior therapy (CBT):</strong><br>
                            This modality of therapy is based on the idea that our emotions are caused by our thoughts. By challenging negative self-talk, it can help you improve your psychological wellbeing.</li>
                    </ul>
                    <p>There are many other types of psychological treatments available. Experiment with different modalities until you find one that's right for you.</p>
                    <p>If your health insurance doesn't cover mental healthcare, then it might be worth investing in private practice psychological care.</p>
                    <p>While private practice is more expensive, consider it an investment in your long-term health.</p>
                    <p>Adequate care during the early stages of recovery can negate the need for even more expensive health care in the long run.</p>
                    
                    <h3>Improving Psychological Care After Stroke</h3>
                    <p>The aftermath of a stroke can take a devastating toll on patients' psychological health.</p>
                    <p>To negate the effects of post-stroke depression and other psychological disorders, better psychological care is needed.</p>
                    <p>Experiment with different modalities like talk therapy or positive psychology to help improve your confidence and mood.</p>
                    <p>This can result in a virtuous cycle where your recovery continues to improve.</p>
                    <p>Good luck!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section" id="contact">
        <div class="container">
            <div class="contact-container">
                <div class="contact-header">
                    <h2>Meet Our Team</h2>
                    <p>Feel free to reach out to us with any questions or concerns</p>
                </div>
                
                <div class="team-members">
                    <div class="team-member red">
                        <div class="member-avatar">
                            <img src="https://api.dicebear.com/6.x/avataaars/svg?seed=John" alt="Team Member">
                        </div>
                        <h3 class="member-name">Vignesh Pandian.T</h3>
                        <p class="member-role">Student @ TCE</p>
                        <div class="member-social">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                        <a href="#" class="contact-btn">Contact Me</a>
                    </div>
                    
                    <div class="team-member blue">
                        <div class="member-avatar">
                            <img src="https://api.dicebear.com/6.x/avataaars/svg?seed=Jane" alt="Team Member">
                        </div>
                        <h3 class="member-name">Ponharshita.P</h3>
                        <p class="member-role">Student @ TCE</p>
                        <div class="member-social">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                        <a href="#" class="contact-btn">Contact Me</a>
                    </div>
                    
                    <div class="team-member yellow">
                        <div class="member-avatar">
                            <img src="https://api.dicebear.com/6.x/avataaars/svg?seed=Alex" alt="Team Member">
                        </div>
                        <h3 class="member-name">Varaalakshime.V</h3>
                        <p class="member-role">Student @ TCE</p>
                        <div class="member-social">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                        <a href="#" class="contact-btn">Contact Me</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Popup for Brain Scan Results -->
    <div class="popup-overlay" id="scan-result-popup">
        <div class="popup-container scan-result-popup">
            <div class="popup-close" id="close-scan-result-popup">&times;</div>
            
            <div class="popup-header">
                <h3 class="popup-title">Brain Scan Analysis Results</h3>
            </div>
            
            <div class="popup-content" id="scan-result-content">
                <div class="popup-image">
                    <img id="scan-image" src="" alt="Brain Scan">
                </div>
                
                <div class="result-section">
                    <div class="result-heading">Analysis Result:</div>
                    <div class="result-value" id="scan-result-value">Stroke Detected</div>
                </div>
                
                <div class="result-section">
                    <div class="result-heading">Confidence:</div>
                    <div id="scan-confidence">91%</div>
                </div>
                
                <div class="result-section">
                    <div class="result-heading">Potentially Affected Areas:</div>
                    <ul class="affected-areas-list" id="affected-areas-list">
                        <li>Cerebellum</li>
                        <li>Brain stem</li>
                        <li>Left hemisphere</li>
                        <li>Temporal lobe</li>
                        <li>Note: This is a preliminary estimate and should be confirmed by a medical professional</li>
                    </ul>
                </div>
                
                <div class="disclaimer">
                    <p>This analysis is provided for informational purposes only and is not a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of your physician or qualified health provider with any questions you may have regarding a medical condition.</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="social-icons">
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fas fa-envelope"></i></a>
            </div>
            
            <div class="copyright">
                © Copyright Stroke Prediction
            </div>
        </div>
    </footer>

    <script>
        // Navigation 
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = {
            'home': document.getElementById('home'),
            'predict': document.getElementById('predict'),
            'brain-scan': document.getElementById('brain-scan'),
            'counsel': document.getElementById('counsel'),
            'contact': document.getElementById('contact'),
            'bmi-calculator': document.getElementById('bmi-calculator'),
            'glucose-calculator': document.getElementById('glucose-calculator'),
            'results': document.getElementById('results')
        };

        // Function to show a specific section
        function showSection(sectionId) {
            // Hide all sections
            Object.values(sections).forEach(section => {
                if (section) section.style.display = 'none';
            });
            
            // Show the selected section
            if (sections[sectionId]) {
                sections[sectionId].style.display = 'block';
            }
            
            // Update active nav link
            navLinks.forEach(link => {
                link.classList.remove('nav-active');
                if (link.dataset.section === sectionId) {
                    link.classList.add('nav-active');
                }
            });
        }

        // Set up event listeners for navigation
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.dataset.section;
                showSection(sectionId);
            });
        });

        // Handle "Get Started" button click
        document.getElementById('get-started').addEventListener('click', (e) => {
            e.preventDefault();
            showSection('predict');
            
            // Update nav links
            navLinks.forEach(link => {
                link.classList.remove('nav-active');
                if (link.dataset.section === 'predict') {
                    link.classList.add('nav-active');
                }
            });
        });

        // BMI Calculator logic
        const weightSlider = document.getElementById('weight-slider');
        const weightValue = document.getElementById('weight-value');
        const heightSlider = document.getElementById('height-slider');
        const heightValue = document.getElementById('height-value');
        const bmiValue = document.getElementById('bmi-value');
        const bmiCategory = document.getElementById('bmi-category');

        function calculateBMI() {
            const weight = parseInt(weightSlider.value);
            const height = parseInt(heightSlider.value) / 100; // Convert cm to meters
            
            const bmi = weight / (height * height);
            bmiValue.textContent = bmi.toFixed(1);
            
            // Update BMI category
            if (bmi < 18.5) {
                bmiCategory.textContent = 'Underweight';
            } else if (bmi < 25) {
                bmiCategory.textContent = 'Normal weight';
            } else if (bmi < 30) {
                bmiCategory.textContent = 'Overweight';
            } else {
                bmiCategory.textContent = 'Obese';
            }
        }

        weightSlider.addEventListener('input', () => {
            weightValue.textContent = `${weightSlider.value} kg`;
            calculateBMI();
        });

        heightSlider.addEventListener('input', () => {
            heightValue.textContent = `${heightSlider.value} cm`;
            calculateBMI();
        });

        // Calculate initial BMI
        calculateBMI();

        // Link to BMI calculator
        document.getElementById('calculate-bmi-link').addEventListener('click', (e) => {
            e.preventDefault();
            showSection('bmi-calculator');
        });

        // Use BMI value in form
        document.getElementById('use-bmi-value').addEventListener('click', () => {
            document.getElementById('bmi').value = bmiValue.textContent;
            showSection('predict');
        });

        // Glucose converter logic
        document.getElementById('calculate-glucose-link').addEventListener('click', (e) => {
            e.preventDefault();
            showSection('glucose-calculator');
        });

        function convertGlucose() {
            const mmolValue = parseFloat(document.getElementById('mmol-value').value);
            if (!isNaN(mmolValue)) {
                const mgdlValue = mmolValue * 18;
                document.getElementById('mgdl-value').textContent = mgdlValue.toFixed(1);
            }
        }

        document.getElementById('convert-glucose').addEventListener('click', convertGlucose);
        
        document.getElementById('mmol-value').addEventListener('input', convertGlucose);

        document.getElementById('use-glucose-value').addEventListener('click', () => {
            const mgdlValue = document.getElementById('mgdl-value').textContent;
            document.getElementById('avg_glucose_level').value = mgdlValue;
            showSection('predict');
        });

        // Form submission
        document.getElementById('stroke-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            
            // Send form data to server
            fetch('/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Update results section
                document.getElementById('result-icon').className = data.high_risk ? 
                    'results-icon high-risk' : 'results-icon low-risk';
                document.getElementById('result-icon').innerHTML = data.high_risk ? 
                    '<i class="fas fa-exclamation-triangle"></i>' : 
                    '<i class="fas fa-check-circle"></i>';
                
                document.getElementById('result-title').textContent = data.title;
                document.getElementById('result-description').textContent = data.description;
                document.getElementById('result-probability').textContent = `Probability: ${data.probability}%`;
                
                // Update risk factors
                const riskFactorsList = document.getElementById('risk-factors-list');
                riskFactorsList.innerHTML = '';
                data.risk_factors.forEach(factor => {
                    const li = document.createElement('li');
                    li.textContent = factor;
                    riskFactorsList.appendChild(li);
                });
                
                // Show results section
                showSection('results');
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while processing your request.');
            });
        });

        // Back to form button
        document.getElementById('back-to-form').addEventListener('click', (e) => {
            e.preventDefault();
            showSection('predict');
        });

        // Go to brain scan button
        document.getElementById('go-to-scan').addEventListener('click', (e) => {
            e.preventDefault();
            showSection('brain-scan');
        });

        // Brain scan file upload
        const fileInput = document.getElementById('file-input');
        const browseFiles = document.getElementById('browse-files');
        const uploadArea = document.getElementById('upload-area');
        const imagePreviewContainer = document.getElementById('image-preview-container');
        const analysisResults = document.getElementById('analysis-results');
        const scanResultPopup = document.getElementById('scan-result-popup');
        const scanResultContent = document.getElementById('scan-result-content');
        const closeScanResultPopup = document.getElementById('close-scan-result-popup');

        browseFiles.addEventListener('click', () => {
            fileInput.click();
        });

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#4CAF50';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#ddd';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#ddd';
            
            if (e.dataTransfer.files.length > 0) {
                handleFiles(e.dataTransfer.files);
            }
        });

        fileInput.addEventListener('change', () => {
            if (fileInput.files.length > 0) {
                handleFiles(fileInput.files);
            }
        });

        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                if (files[i].type.startsWith('image/')) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const previewId = `preview-${Date.now()}-${i}`;
                        
                        // Create preview element
                        const previewElement = document.createElement('div');
                        previewElement.className = 'image-preview';
                        previewElement.id = previewId;
                        previewElement.innerHTML = `
                            <img src="${e.target.result}" alt="Brain Scan">
                            <div class="remove-btn" data-id="${previewId}"><i class="fas fa-times"></i></div>
                        `;
                        
                        imagePreviewContainer.appendChild(previewElement);
                        
                        // Add click event to remove button
                        previewElement.querySelector('.remove-btn').addEventListener('click', function() {
                            const id = this.getAttribute('data-id');
                            document.getElementById(id).remove();
                        });
                        
                        // Analyze the image
                        analyzeImage(e.target.result, previewId, files[i]);
                    };
                    
                    reader.readAsDataURL(files[i]);
                }
            }
        }

        function analyzeImage(imageData, previewId, file) {
            // Create FormData object to send the image
            const formData = new FormData();
            formData.append('file', file);
            
            // Show loading state
            const resultItem = document.createElement('div');
            resultItem.className = 'analysis-result-item';
            resultItem.id = `result-${previewId}`;
            resultItem.innerHTML = `
                <div class="result-info">
                    <div class="result-title">Analyzing image...</div>
                    <div><i class="fas fa-spinner fa-spin"></i> Please wait while we analyze your brain scan.</div>
                </div>
            `;
            
            analysisResults.appendChild(resultItem);
            
            // Send the image to the server for analysis
            fetch('/upload-brain-scan', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Regular analysis result
                    const isStroke = data.predicted_class === 'Stroke';
                    resultItem.innerHTML = `
                        <img src="${data.visualization_url || imageData}" alt="Brain Scan" class="result-image">
                        <div class="result-info">
                            <div class="result-title">Brain Scan Analysis Result</div>
                            <div class="result-status ${isStroke ? 'status-positive' : 'status-negative'}">
                                ${isStroke ? 'Stroke Detected' : 'No Stroke Detected'}
                            </div>
                            <div>Confidence: ${Math.round(data.confidence * 100)}%</div>
                            <div style="margin-top: 15px;">
                                <button class="btn" onclick="showDetailedAnalysis('${encodeURIComponent(JSON.stringify(data))}', '${imageData}')">View Detailed Analysis</button>
                            </div>
                        </div>
                    `;
                } else {
                    // Error handling
                    resultItem.innerHTML = `
                        <img src="${imageData}" alt="Brain Scan" class="result-image">
                        <div class="result-info">
                            <div class="result-title">Analysis Error</div>
                            <div class="result-status" style="background-color: #FFEBEE; color: #E53935;">
                                Error analyzing image
                            </div>
                            <div>${data.error || 'An unknown error occurred'}</div>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                resultItem.innerHTML = `
                    <img src="${imageData}" alt="Brain Scan" class="result-image">
                    <div class="result-info">
                        <div class="result-title">Analysis Error</div>
                        <div class="result-status" style="background-color: #FFEBEE; color: #E53935;">
                            Server Error
                        </div>
                        <div>Failed to communicate with the server. Please try again.</div>
                    </div>
                `;
            });
        }

        // Function to display detailed analysis popup
        function showDetailedAnalysis(dataJson, imageData) {
            try {
                const data = JSON.parse(decodeURIComponent(dataJson));
                const isStroke = data.predicted_class === 'Stroke';
                
                // Update popup content
                document.getElementById('scan-image').src = data.visualization_url || imageData;
                
                const resultValueElement = document.getElementById('scan-result-value');
                resultValueElement.textContent = isStroke ? 'Stroke Detected' : 'No Stroke Detected';
                resultValueElement.className = isStroke ? 'result-value' : 'result-value negative';
                
                document.getElementById('scan-confidence').textContent = `${Math.round(data.confidence * 100)}%`;
                
                // Update affected areas
                const affectedAreasList = document.getElementById('affected-areas-list');
                affectedAreasList.innerHTML = '';
                
                if (isStroke && data.affected_areas && data.affected_areas.length > 0) {
                    data.affected_areas.forEach(area => {
                        const li = document.createElement('li');
                        li.textContent = area;
                        affectedAreasList.appendChild(li);
                    });
                } else {
                    const li = document.createElement('li');
                    li.textContent = 'No affected areas detected';
                    affectedAreasList.appendChild(li);
                }
                
                // Show popup
                scanResultPopup.style.display = 'flex';
                
            } catch (error) {
                console.error('Error displaying analysis:', error);
                alert('Error displaying analysis details');
            }
        }

        // Close detailed analysis popup
        closeScanResultPopup.addEventListener('click', () => {
            scanResultPopup.style.display = 'none';
        });

        // Make showDetailedAnalysis available globally
        window.showDetailedAnalysis = showDetailedAnalysis;

        // Initialize the page
        showSection('home');
    </script>
</body>
</html>